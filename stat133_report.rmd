---
title: "stat133_report"
author: "Angela Dai"
date: "December 8, 2015"
output: pdf_document
---

#Introduction
##Description of Problems 
Main Research Question: How has the University of California pay distribution 
changed over time? 

##Description of Data
Raw Data Sources: Transparent California (2012-2014), UCOP Academic Title Code, 
UC Student Enrollment

Potential Resource: http://www.air.org/sites/default/files/downloads/report/DeltaCostAIR-Labor-Expensive-Higher-Education-Staffing-Brief-Feb2014.pdf

Note: there are changes from year to year on classification of titles, spellings 
within years, etc. For our report, we are defining academic and staff as follows:
Academic employees: those directly engaged in the academic mission â€“ professors, 
clinical professors, other teaching faculty, researchers, and other academic 
titles
Staff/non-academic employees: those who support academic departments, 
student services, patient care and other university functions

#Analysis Approach
##Academic vs. Staff/Non-Academic Workforce Distribution of Total Compensation, 2012-2014
```{r}


```
This could be a bar chart showing changes in breakdown of academic vs staff/non-academic % compensation and changes in overall compensation, with: 
x-axis: $30k groupings of total compensation
y-axis: # of employees
We could conclude: 
The largest % of academic employees fall in the $x-$x range

##Average Total Compensation for Academic Positions, 2012-2014
```{r}


```
Conclude: the average pay of academic employees has been increasing/decreasing

##Workforce Headcount vs. Total Compensation Trends, 2012-2014
```{r}


```
Hypothesize that as headcount rises, compensation expected to rise. Is this tied to changes in student enrollment?

##Components of Total Compensation for Academic vs Staff
```{r}


```
Hypothesize more benefits for academic positions? E.g. they may have the same salary, but total compensation differs because of benefits.

##Student Services Compensation vs. UC Student Enrollment, 2012-2014
```{r}


```
Differences in % changes 
How many student services staff per 1,000 students
How much has student services compensation changed per 1,000 students

##Workforce Headcount vs. UC Student Enrollment, 2012-2014
```{r}
#source can be found in resources folder as enrollment-data.pdf

#this function finds the percent increase per year for 2012-14
#takes in a numeric vector with three entries
#will output a vector with three entries for percent increases for 2012-13 and 2013-14
#first entry will be zero as a baseline and to show increase between 2012-13 in a plot
find_percent <- function(totals){
  diff = c(totals[2] - totals[1], totals[3] - totals[2])
  percents = diff / totals[1:2]
  percents = c(0, percents)
  return(percents)
}

enroll = c(184562, 183498, 191369)
tot.acad = c(nrow(acad_2012), nrow(acad_2013), nrow(acad_2014))
tot.non = c(nrow(non_acad_2012), nrow(non_acad_2013), nrow(non_acad_2014))

percent.enroll = find_percent(enroll)
percent.acad = find_percent(tot.acad)
percent.non = find_percent(tot.non)

df.perc = data.frame(enroll = percent.enroll, acad = percent.acad, 
                     non = percent.non, total = percent.acad+percent.non, 
                     year = c(2012:2014), row.names = NULL)


#graphing percent increase in enrollment vs. # of faculty/staff/admin
ggplot(data = df.perc, aes(year)) +
  geom_point(aes(y = acad, color = 'acad')) +
  geom_point(aes(y = non, color = 'non')) +
  geom_point(aes(y = total, color = 'total')) +
  geom_point(aes(y = enroll, color = 'enroll')) +
  geom_line(aes(y = acad, color = 'acad')) +
  geom_line(aes(y = non, color = 'non')) +
  geom_line(aes(y = total, color = 'total')) +
  geom_line(aes(y = enroll, color = 'enroll')) +
  ggtitle('Percent Increase in Enrollment Compared to Faculty/Staff (2012-14)') +
  xlab('Year') +
  ylab('Percent') + 
  scale_fill_discrete(name = 'Legend',
                      labels = c('A', 'B', 'C', 'D'))

```
Hypothesize more headcount with more enrollment

##Workforce Compensation vs. UC Student Enrollment, 2012-2014
```{r}


```
Hypothesize more compensation with more enrollment. Since academic pay has decreased from 2013-2014,
how are costs being contained? See next graph

##Changes in % Lecturers vs % Tenured Professors 
```{r}


```
Are lecturers replacing full-time professors (or vice versa) in effort to contain costs? 

##Changes in Tuition vs Academic Spending
```{r}


```
It is often perceived that faculty spending is driving tuition increases. Is tuition increasing at the same rate as academic spending?


##Total Compensation by Acad/Non-Acad over Time
```{r}
#Total Overhead over Time
ggplot(data = df_tot, aes(year)) +
  geom_point(aes(y = acad, color = 'acad')) +
  geom_point(aes(y = non, color = 'non')) +
  geom_line(aes(y = acad, color = 'acad')) +
  geom_line(aes(y = non, color = 'non')) +
  ggtitle('Total Overhead by Academic and Non-Academic (2012-14)') +
  xlab('Year') +
  ylab('Total')
  
#Difference in Overhead
ggplot(data = df_tot, aes(year)) +
  geom_point(aes(y = dif, color = 'dif')) +
  geom_line(aes(y = dif, color = 'dif')) +
  ggtitle('Difference between Academic and Non-Academic Total Overhead (2012-14)') +
  xlab('Year') +
  ylab('Difference')

#Two graphs above combined
ggplot(data = df_tot, aes(year)) +
  geom_point(aes(y = acad, color = 'acad')) +
  geom_point(aes(y = non, color = 'non')) +
  geom_point(aes(y = dif, color = 'dif')) +
  geom_line(aes(y = acad, color = 'acad')) +
  geom_line(aes(y = non, color = 'non')) +
  geom_line(aes(y = dif, color = 'dif')) +
  ggtitle('Total Overhead by Academic and Non-Academic (2012-14)') +
  xlab('Year') +
  ylab('Total/Difference (in USD)')

```


##Comparing Compensation for Three Types of Professor

```{r}

#Densities of Total Pay by Type of Professor
tenure.prof = acad.2014$Total[acad.2014$Category == 'PROFESSORIAL-TENURE']
clin.series = acad.2014$Total[acad.2014$Category == "PROFESSOR OF CLINICAL"]
health.sciences = acad.2014$Total[acad.2014$Category == 'HEALTH SCIENCES CLINICAL PROFESSOR']
dft = data.frame(tenure = tenure.prof)
dfc = data.frame(clinical = clin.series)
dfh = data.frame(health = health.sciences)

ggplot() +
  geom_density(data = dft, aes(x = tenure, fill = 'tenure'), alpha = 0.7) + 
  geom_density(data = dfc, aes(x = clinical, fill = 'clinical'), alpha = 0.7) +
  geom_density(data = dfh, aes(x = health, fill = 'health'), alpha = 0.7) +
  scale_fill_discrete(name = 'Type of Professor', labels = c('Clinical', 'Health Sciences Clinical', 'Tenured')) +
  ggtitle('Densities of Total Pay by Type of Professor') +
  xlab('Total') +
  ylab('Density')

```

