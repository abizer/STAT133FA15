---
title: "stat133_report"
author: "Angela Dai"
date: "December 8, 2015"
output: pdf_document
---

#Introduction
##Description of Problems 
Main Research Question: How has the University of California pay distribution 
changed over time? 

##Description of Data
Raw Data Sources: Transparent California (2012-2014), UCOP Academic Title Code, 
UC Student Enrollment

Potential Resource: http://www.air.org/sites/default/files/downloads/report/DeltaCostAIR-Labor-Expensive-Higher-Education-Staffing-Brief-Feb2014.pdf

Note: there are changes from year to year on classification of titles, spellings 
within years, etc. For our report, we are defining academic and staff as follows:
Academic employees: those directly engaged in the academic mission â€“ professors, 
clinical professors, other teaching faculty, researchers, and other academic 
titles
Staff/non-academic employees: those who support academic departments, 
student services, patient care and other university functions

#Analysis Approach
##Academic vs. Staff/Non-Academic Workforce Distribution of Total Compensation, 2012-2014
```{r}


```
This could be a bar chart showing changes in breakdown of academic vs staff/non-academic % compensation and changes in overall compensation, with: 
x-axis: $30k groupings of total compensation
y-axis: # of employees
We could conclude: 
The largest % of academic employees fall in the $x-$x range

##Average Total Compensation for Academic Positions, 2012-2014
```{r}


```
Conclude: the average pay of academic employees has been increasing/decreasing

##Workforce Headcount vs. Total Compensation Trends, 2012-2014
```{r}


```
Hypothesize that as headcount rises, compensation expected to rise. Is this tied to changes in student enrollment?

##Components of Total Compensation for Academic vs Staff
```{r}


```
Hypothesize more benefits for academic positions? E.g. they may have the same salary, but total compensation differs because of benefits.

##Student Services Compensation vs. UC Student Enrollment, 2012-2014
```{r}


```
Differences in % changes 
How many student services staff per 1,000 students
How much has student services compensation changed per 1,000 students

##Workforce Headcount vs. UC Student Enrollment, 2012-2014
```{r}
#source: http://finreports.universityofcalifornia.edu/index.php?file=13-14/pdf/fullreport-1314.pdf
enroll = c(179581, 184562, 183498, 191369)
names(enroll) = c('2011', '2012', '2013', '2014')
diff.enroll = c(184562-179581, 183498-184562, 191369-183498)
names(diff.enroll) = c('2011-12', '2012-13', '2013-14')
percent.enroll = diff.enroll[2:3] / enroll[2:3]
percent.enroll = c(0, percent.enroll)

diff.acad = c(nrow(acad.2013)-nrow(acad.2012), nrow(acad.2014)-nrow(acad.2013))
names(diff.acad) = c('2012-13', '2013-14')
percent.acad = diff.acad / c(nrow(acad.2012), nrow(acad.2013))
percent.acad = c(0, percent.acad)

diff.non = c(nrow(non.acad.2013)-nrow(non.acad.2012), nrow(non.acad.2014)-nrow(non.acad.2013))
names(diff.non) = c('2012-13', '2013-14')
percent.non = diff.non / c(nrow(non.acad.2012), nrow(non.acad.2013))
percent.non = c(0, percent.non)

df.perc = data.frame(enroll = percent.enroll, acad = percent.acad, 
                     non = percent.non, total = percent.acad+percent.non, 
                     year = c(2012:2014), row.names = NULL)


#graphing percent increase in enrollment vs. # of faculty/staff/admin
ggplot(data = df_perc, aes(year)) +
  geom_point(aes(y = acad, color = 'acad')) +
  geom_point(aes(y = non, color = 'non')) +
  geom_point(aes(y = total, color = 'total')) +
  geom_point(aes(y = enroll, color = 'enroll')) +
  geom_line(aes(y = acad, color = 'acad')) +
  geom_line(aes(y = non, color = 'non')) +
  geom_line(aes(y = total, color = 'total')) +
  geom_line(aes(y = enroll, color = 'enroll')) +
  ggtitle('Percent Increase in Enrollment Compared to Faculty/Staff (2012-14)') +
  xlab('Year') +
  ylab('Percent')

```
Hypothesize more headcount with more enrollment

##Workforce Compensation vs. UC Student Enrollment, 2012-2014
```{r}


```
Hypothesize more compensation with more enrollment. Since academic pay has decreased from 2013-2014,
how are costs being contained? See next graph

##Changes in % Lecturers vs % Tenured Professors 
```{r}


```
Are lecturers replacing full-time professors (or vice versa) in effort to contain costs? 

##Changes in Tuition vs Academic Spending
```{r}


```
It is often perceived that faculty spending is driving tuition increases. Is tuition increasing at the same rate as academic spending?


##Total Compensation by Acad/Non-Acad over Time
```{r}
#Total Overhead over Time
ggplot(data = df_tot, aes(year)) +
  geom_point(aes(y = acad, color = 'acad')) +
  geom_point(aes(y = non, color = 'non')) +
  geom_line(aes(y = acad, color = 'acad')) +
  geom_line(aes(y = non, color = 'non')) +
  ggtitle('Total Overhead by Academic and Non-Academic (2012-14)') +
  xlab('Year') +
  ylab('Total')
  
#Difference in Overhead
ggplot(data = df_tot, aes(year)) +
  geom_point(aes(y = dif, color = 'dif')) +
  geom_line(aes(y = dif, color = 'dif')) +
  ggtitle('Difference between Academic and Non-Academic Total Overhead (2012-14)') +
  xlab('Year') +
  ylab('Difference')

#Two graphs above combined
ggplot(data = df_tot, aes(year)) +
  geom_point(aes(y = acad, color = 'acad')) +
  geom_point(aes(y = non, color = 'non')) +
  geom_point(aes(y = dif, color = 'dif')) +
  geom_line(aes(y = acad, color = 'acad')) +
  geom_line(aes(y = non, color = 'non')) +
  geom_line(aes(y = dif, color = 'dif')) +
  ggtitle('Total Overhead by Academic and Non-Academic (2012-14)') +
  xlab('Year') +
  ylab('Total/Difference (in USD)')

```


##Comparing Compensation for Three Types of Professor

```{r}

#Densities of Total Pay by Type of Professor
tenure.prof = acad.2014$Total[acad.2014$Category == 'PROFESSORIAL-TENURE']
clin.series = acad.2014$Total[acad.2014$Category == "PROFESSOR OF CLINICAL"]
health.sciences = acad.2014$Total[acad.2014$Category == 'HEALTH SCIENCES CLINICAL PROFESSOR']
dft = data.frame(tenure = tenure.prof)
dfc = data.frame(clinical = clin.series)
dfh = data.frame(health = health.sciences)

ggplot() +
  geom_density(data = dft, aes(x = tenure, fill = 'tenure'), alpha = 0.7) + 
  geom_density(data = dfc, aes(x = clinical, fill = 'clinical'), alpha = 0.7) +
  geom_density(data = dfh, aes(x = health, fill = 'health'), alpha = 0.7) +
  scale_fill_discrete(name = 'Type of Professor', labels = c('Clinical', 'Health Sciences Clinical', 'Tenured')) +
  ggtitle('Densities of Total Pay by Type of Professor') +
  xlab('Total') +
  ylab('Density')

```

